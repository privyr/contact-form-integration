"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var PrivyrWP=function(){function a(e,n,t,i){_classCallCheck(this,a),this.licence_code=e,this.field_names={},this.initializeInputIdsToPrivyr(n,t,i),document.onreadystatechange=function(){console.log("hshshshhshs"),"complete"===document.readyState&&window._privyr_wpcf7.captureLeads()}}return _createClass(a,[{key:"initializeInputIdsToPrivyr",value:function(e,n,t){this.field_names[e]="name",this.field_names[n]="email",this.field_names[t]="phonenumber"}},{key:"mapIds",value:function(e){var n=this;return e.map(function(e){n.field_names[e.name]&&(e.name=n.field_names[e.name])}),e}},{key:"postLeads",value:function(e){var n={licence_code:this.licence_code,lead:e,hostname:window.location.hostname,full_url:window.location.href},t=new XMLHttpRequest,i="https://www.{host}/integrations/api/v1/new-wpcf7-lead".replace("{host}",window._pvyr_host);t.open("POST",i),t.onload=function(){console.log(t.status)},t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(n))}},{key:"captureLeads",value:function(){var t=this;document.addEventListener("wpcf7submit",function(e){if("validation_failed"!==e.detail.apiResponse.status){var n=e.detail.inputs;t.postLeads(t.mapIds(n))}},!1)}}]),a}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}PrivyrWP=function(){function a(e,n,t,i){_classCallCheck(this,a),this.licence_code=e,this.field_names={},this.initializeInputIdsToPrivyr(n,t,i),document.onreadystatechange=function(){console.log("hshshshhshs"),"complete"===document.readyState&&window._privyr_wpcf7.captureLeads()}}return _createClass(a,[{key:"initializeInputIdsToPrivyr",value:function(e,n,t){this.field_names[e]="name",this.field_names[n]="email",this.field_names[t]="phonenumber"}},{key:"mapIds",value:function(e){var n=this;return e.map(function(e){n.field_names[e.name]&&(e.name=n.field_names[e.name])}),e}},{key:"postLeads",value:function(e){var n={licence_code:this.licence_code,lead:e,hostname:window.location.hostname,full_url:window.location.href},t=new XMLHttpRequest,i="https://www.{host}/integrations/api/v1/new-wpcf7-lead".replace("{host}",window._pvyr_host);t.open("POST",i),t.onload=function(){console.log(t.status)},t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(n))}},{key:"captureLeads",value:function(){var t=this;document.addEventListener("wpcf7submit",function(e){if("validation_failed"!==e.detail.apiResponse.status){var n=e.detail.inputs;t.postLeads(t.mapIds(n))}},!1)}}]),a}();